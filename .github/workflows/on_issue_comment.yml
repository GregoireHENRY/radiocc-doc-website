name: On issue comment

on: 
  issue_comment:
    types: created

jobs:
  check_comment:
    runs-on: ubuntu-latest
    env:
      USER: ${{ github.event.issue.user.login }}
      COMMENT: ${{ github.event.comment.body }}
      CHECK: ${{ github.event.issue.number == '1'
        && github.event.issue.user.login == 'GregoireHENRY'
        && github.event.comment.body == 'Plz do dat build' }}
    if: ${CHECK} == true
    steps:
      - run: echo "${CHECK}"

  update_module:
    runs-on: ubuntu-latest
    steps:
      - run: exit 1
      - uses: actions/checkout@v2
      - name: Pull & update submodules recursively
        run: |
          git submodule update --init --recursive
          git submodule update --recursive --remote
      - name: Commit
        run: |
          git config user.name github-actions
          git config user.email github-actions@github.com
          git add .
          git commit -m "auto: update submodules" || echo "No changes to commit"
          git push
        

